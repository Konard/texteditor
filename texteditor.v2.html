<!DOCTYPE html>
<html>
<head>
  <title>Text editor v2</title>
</head>
<body>
  <form>
    <div>
      <input type="file">
      <input id="t2" type="text" value="texteditor.v2.html">
      <input id="b1" type="button" value="Save1">
    </div>
    <div>
      <textarea id="t1" rows="1000" cols="58"></textarea>
    </div>
    <script>
      var input = document.querySelector("input[type=file]");
      var text = document.querySelector("textarea#t1");
      var filename = document.querySelector("input#t2");
      var button1 = document.querySelector("input#b1");
      text.value = new XMLSerializer().serializeToString(document) + "/" + filename.value;
      input.onchange = function(e) {
        var reader = new FileReader();
        reader.onload = function(event) {
          text.value = event.target.result;
          filename.value = e.target.files[0].name;
        }
        reader.readAsText(e.target.files[0], "UTF-8");
      }
      button1.onclick = function(e) {
        e.preventDefault();
        window.open("data:application/octet-stream," + encodeURIComponent(text.value) + "/" + filename.value, "_self");
      }
    </script>
  </form>
</body>
</html>/texteditor.v2.html