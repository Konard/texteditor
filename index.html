<!DOCTYPE html>
<html>
<head>
  <title>texteditor.v8.html</title>
  <style>
    * { font-family: courier new; margin: 0px; padding: 0px; }
    #menu { position: fixed; top: 0px; left: 0px; height: 43px; width: 100%; background-color: #fff; border-bottom: 1px solid #000; }
    #menu > * { margin-top: 10px; margin-left: 10px; }
    #t1 { border: none; padding: 2%; position: absolute; top: 44px; width: 96%; }
    #f1 { width: 87px; }
    #t2 { width: 400px; }
  </style>
</head>
<body>
  <form>
    <div id="menu">
      <input id="t2" type="text">
      <input id="f1" type="file">
      <input id="b1" type="button" value="Save">
    </div>
    <div>
      <textarea id="t1" rows="1000"></textarea>
    </div>
    <script>
      var fileSelector = document.querySelector("#f1");
      var text = document.querySelector("#t1");
      var filename = document.querySelector("#t2");
      var saveButton = document.querySelector("#b1");
      filename.value = document.title;
      text.value = new XMLSerializer().serializeToString(document) + "/" + filename.value;
      fileSelector.onchange = function(e) {
        var file = e.target.files[0];
        var reader = new FileReader();
        reader.onload = function(event) {
          text.value = event.target.result;
          filename.value = file.name;
        }
        reader.readAsText(file);
      }
      saveButton.onclick = function(e) {
        e.preventDefault();
        window.open("data:application/octet-stream," + encodeURIComponent(text.value) + "/" + filename.value, "_self");
      }
    </script>
  </form>
</body>
</html>/texteditor.v8.html